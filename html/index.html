<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>RapiBot</title>
    <script type="text/javascript" src="/webiopi.js"></script>
    <script type="text/javascript">
        webiopi().ready(function() {
            //fungsi setting jam
            var updateLightHours = function(macro, args, response) {
                var hours = response.split(";");
                //penggunaan jquery functions
                $("#inputOn").val(hours[0]);
                $("#inputOff").val(hours[1]);
            }
            
            webiopi().callMacro("getLightHours", [], updateLightHours);

            //buat button untuk set light hours
            var sendButton = webiopi().createButton("sendButton", "Send", function() {
                var hours = [$("#inputOn").val(), $("#inputOff").val()];
                //panggil macro
                webiopi().callMacro("setLightHours", hours, updateLightHours);
            });

            //append button
            $("#controls").append(sendButton);

            //buat button dengan label untuk GPIO17
            var button = webiopi().createGPIOButton(17, "Lampu");

            //tambahkan button tersebut ke elemen "control"
            $("#controls").append(button);

            //refresh GPIO buttons
            //berikan true untuk refresh berulang dan false untuk sekali saja
            webiopi().refreshGPIO(true);
        });
    </script>
    <style type="text/css">
            button {
                    display: block;
                    margin: 5px 5px 5px 5px;
                    width: 160px;
                    height: 45px;
                    font-size: 24pt;
                    font-weight: bold;
                    color: white;
            }

            #gpio17.LOW {
                    background-color: Black;
            }

            #gpio17.HIGH {
                    background-color: Blue;
            }
    </style>
</head>
<body>
    <div align="center">
        Hidup pada :<input type="text" id="inputOn"/><br/>
        Mati pada :<input type="text" id="inputOff"/><br/>
    </div>
    <div id="controls" align="center"/>
    <div id="streaming" align="center">
        <img width="320" height="240" src="http://192.168.1.4:8080/?action=stream"/>
    </div>
</body>
</html>